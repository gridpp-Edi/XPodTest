
## About

This is the 'minimal' setup needed to run an XRootD server which supports checking x509 authentication as well as enabling adler32 checksums of files it serves and 3rd party copies.

```
.
├── install.sh
└── XRootD-POSIXServer-x509
    ├── data
    │   └── testFile
    ├── docker-compose.yml
    ├── entrypoint.sh
    ├── etc
    │   └── xrootd
    │       └── xrootd-posix-storage.conf
    ├── output
    ├── README.md
    ├── scripts
    │   ├── pythonChunkStream.py
    │   ├── pythonFSTests.py
    │   ├── pythonStream.py
    │   └── pythonVectorStream.py
    └── usr
        └── local
            └── bin
                └── xrdadler32.sh
```

## Tests

The tests which are run against this are the basic x509 copy in/out, 3rd party copies, adler32 checks and some basic stats.
There are also some tests of the Python XRootD API.

## Servers

This config is composed of 1 server and can be manually brought up/down using:

```
podman-compose -f docker-compose.yml down -t0
```

```
podman-compose -f docker-compose.yml up -d
```

## Tests

It is possible to manually run a single test against this, e.g.:

```
podman run --user xrootd --net host --rm --name xrootd-test-client -v /tmp:/tmp -v $PWD/output:/output -v /etc/vomses:/etc/vomses -v /etc/grid-security:/etc/grid-security -ti gridppedi/xrdtesting:xrd-v5.8.3 /usr/bin/xrdcp -d1 root://xrd1.edi.scotgrid.ac.uk//data/testFile /output/
```

However this requires some slight care and remembering to setup/manage client/user auth as well as cleaning up any artefacts generated by the test itself.

